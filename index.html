<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <link href="index.css" rel="stylesheet" />
    <title>miniapp</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>
      function formatQuery() {
        var url = window.location.href;
        var index = url.lastIndexOf('?');
        var queryMap = {};
        if (index > -1) {
          var queryStr = url.slice(index + 1);
          var queryList = queryStr.split('&');
          for (var i = 0; i < queryList.length; i++) {
            var value = queryList[i];
            if (value) {
              var item = value.split('=');
              var key = item[0] || '';
              var val = item[1] ? decodeURIComponent(item[1]) : '';
              queryMap[key] = val;
            }
          }
        }
        return queryMap;
      }

      (function () {
        try {
          var queryMap = formatQuery();
          document.documentElement.style.backgroundColor = queryMap.bgColor || '#ffffff';
          if (queryMap._transsion_dlt_miniapp_dark_theme_is_enabled === '1') {
            document.documentElement.classList.add('dlt-dark__mode');
          }
        } catch (e) {
          console.error('Error in initialization script:', e);
        }
      })();

      (function (global) {
        global.performanceMetrics = global.performanceMetrics || {};
        global.performanceMetrics.feRenderPreloadStart = Date.now();
      })(window);
    </script>
  </head>
  <body>
    <div class="container">
      <h1>Welcome to MiniApp</h1>
      <p>This is a mobile-optimized app.</p>
      <button>Click Me</button>
    </div>
    <script src="render.js"></script>
    <script>
      (function (global) {
        global.performanceMetrics = global.performanceMetrics || {};
        global.performanceMetrics.feSlavePreloadEnd = Date.now();
      })(window);
    </script>
  </body>
</html>
